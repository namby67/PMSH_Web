@{
    ViewData["Title"] = "Home Page";
}
@* <link href="~/css/pages/reservation.css" rel="stylesheet" asp-append-version="true" /> *@


<style>
    .note-textarea {
        height: 160px;
    }

    .ts-wrapper .ts-control {
        margin: 0 0 0 -8px !important;
        padding: 0px 0px 0px 5px !important;
    }

    .nav-link {
        color: #009444 !important;
    }
</style>

<!--Model chose product type-->
<div class="modal fade bd-example-modal-sm" id="profileTypeModal" tabindex="-1" role="dialog"
    aria-labelledby="profileTypeModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="profileTypeModalLabel">Choose Profile Type</h5>

            </div>
            <div class="modal-body p-2">
                <div class="form-check d-block">
                    <input class=" " type="radio" name="inlineRadioOptions" id="inlineRadio1" value="0" checked>
                    <label class="form-check-label" for="inlineRadio1"><b>Individual</b></label>
                </div>
                <div class="form-check d-block">
                    <input class=" " type="radio" name="inlineRadioOptions" id="inlineRadio2" value="2">
                    <label class="form-check-label" for="inlineRadio2"><b>Company</b></label>
                </div>
                <div class="form-check d-block">
                    <input class=" " type="radio" name="inlineRadioOptions" id="inlineRadio3" value="1">
                    <label class="form-check-label" for="inlineRadio3"><b>Travel Agent</b></label>
                </div>
                <div class="form-check d-block">
                    <input class=" " type="radio" name="inlineRadioOptions" id="inlineRadio4" value="3">
                    <label class="form-check-label" for="inlineRadio4"><b>Source</b></label>
                </div>
                <div class="form-check d-block">
                    <input class="" type="radio" name="inlineRadioOptions" id="inlineRadio5" value="4">
                    <label class="form-check-label" for="inlineRadio5"><b>Group</b></label>
                </div>
                <div class="form-check d-block">
                    <input class=" " type="radio" name="inlineRadioOptions" id="inlineRadio6" value="5">
                    <label class="form-check-label" for="inlineRadio6"><b>Contract</b></label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="mui-button mui-button-close" data-dismiss="modal"
                    onclick="$('#profileTypeModal').modal('hide');">Close</button>
                <button type="button" class="mui-button mui-button-new" onclick="chooseProfileType();">OK</button>
            </div>
        </div>
    </div>
</div>


<div id="loadingSpinner"
    style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); z-index:1000;">
    <i class="fa-solid fa-spinner fa-spin"></i>
</div>

<div id="form_profile" class="form_profile">

    <div class="header" style="justify-content:center;border:none">
        <h3 id="content-title">New Profile</h3>
    </div>
    <div class="mt-4">
        <button id="btnView" onclick="openModalSearch()" class="submit-button-clear-reservation">Search</button>

        <button type="button" class="submit-button-clear-reservation" onclick="saveProfile();">Save</button>
        <button type="button" class="submit-button-clear-reservation" onclick="closeFormProfile()">Change Profile
            Type</button>
        <button type="button" class="submit-button-new-reservation">Clear</button>
    </div>
    <div class="profile_input">
        <div style="display:flex" class="mt-4">
            <div
                style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;padding:4px;background-color:#ececec">
                Stats Infor</div>
            <div
                style="box-shadow: rgba(0, 0, 0, 0.02) 0px 1px 3px 0px, rgba(27, 31, 35, 0.15) 0px 0px 0px 1px;padding:4px;background-color:#ececec;margin-left:4px">
                Contact</div>
        </div>

        <!--profile individual-->
        <div class="main-infor mt-3" id="profile_individual">
            <div class="row justify-content-center">
                <!-- Tabs -->
                <div class="d-flex justify-content-center">
                    <ul class="nav nav-tabs mb-2 col-12 col-lg-10" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-ind-address"
                                type="button">
                                Address & Communications
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-ind-internal"
                                type="button">
                                Tax / Internal / Status
                            </button>
                        </li>
                    </ul>
                </div>

                <div class="row">
                    <div class="col-lg-1">
                        <div class="mb-2 d-flex justify-content-center">
                            <label for="">Image</label>
                        </div>
                        <div class="mb-4 d-flex justify-content-center">
                            <img id="selectedImage"
                                src="https://scontent.fhan17-1.fna.fbcdn.net/v/t1.30497-1/453178253_471506465671661_2781666950760530985_n.png?stp=dst-png_s200x200&_nc_cat=1&ccb=1-7&_nc_sid=136b72&_nc_ohc=G84eH8GGiWgQ7kNvwE83FZy&_nc_oc=AdkGZKo_VUsRFqDslroz75QLB3Dsqx1BeohdoUOZ6zkLarvZ9pxrPuqg-y7FG7kBPmI&_nc_zt=24&_nc_ht=scontent.fhan17-1.fna&oh=00_Afo1Syqr5y_VZWchyn3cKinAvCYq8vQueUv0Rf2qAV7nyw&oe=6984227A"
                                alt="example placeholder" style="width: 140px;" />
                        </div>
                        <div class="d-flex justify-content-center">
                            <div data-mdb-ripple-init class="mui-button mui-button-new">
                                <label class="form-label text-black m-1" for="customFile1">Choose
                                    file</label>
                                <input type="file" class="form-control d-none" id="customFile1"
                                    onchange="displaySelectedImage(event, 'selectedImage')" />
                            </div>
                        </div>
                    </div>
                    <div class="tab-content col-12 col-lg-10">

                        <!-- ================= TAB 1 ================= -->
                        <div class="tab-pane fade show active " id="tab-ind-address">
                            <div class="row ">
                                <!-- LEFT COLUMN (Image + Address) -->
                                <div class="col-md-6 mui-card">

                                    <!-- Personal / Address info -->

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">
                                            Code <span class="text-danger">*</span>
                                        </label>
                                        <div class="col-sm-4 ">
                                            <input type="text" class="form-control" id="txtCodeIndividual"
                                                name="codeIndividual" data-bs-toggle="tooltip"
                                                title="The contact code will have a fixed length of 13 characters."
                                                data-bs-placement="right">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Full Name <span
                                                class="text-danger">*</span></label>
                                        <div class="col-sm-6 position-relative">
                                            <input type="text" class="form-control" id="txtFullNameIndividual"
                                                name="fullNameIndividual" data-bs-toggle="tooltip"
                                                title="Please typing as below: LastName MiddleName, FirstName, Mr. OR LastName MiddleName, FirstName."
                                                data-bs-placement="right">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">First / Last
                                            Name <span class="text-danger">*</span></label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" id="txtFirstNameIndividual"
                                                name="firstNameIndividual">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" id="txtLastNameIndividual"
                                                name="lastNameIndivdual">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Middle Name <span
                                                class="text-danger">*</span></label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtMiddleNameIndividual">
                                        </div>
                                    </div>


                                    <hr class="my-2">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Language / Title</label>
                                        <div class="col-sm-3">
                                            <select id="txtLanguageIndividual" class="ms-2"
                                                data-placeholder="Please select Language"></select>
                                        </div>
                                        <div class="col-sm-3 ">
                                            <select id="txtTitleIndividual"
                                                data-placeholder="Please select Title"></select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">
                                            Nationality <span class="text-danger">*</span>/ Country
                                        </label>
                                        <div class="col-sm-3 ">
                                            <select id="txtNationalityIndividual" class="ms-2"
                                                name="nationalityIndividual"
                                                data-placeholder="Please select Nationality"></select>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-sm-3 ">
                                            <select id="txtCountryIndividual"
                                                data-placeholder="Please select Country"></select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">City</label>
                                        <div class="col-sm-6">
                                            <select id="txtCityIndividual" class="ms-2"
                                                data-placeholder="Please select City"></select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Postal / State</label>
                                        <div class="col-sm-3">
                                            <input type="text" id="txtPostalIndividual">
                                        </div>
                                        <div class="col-sm-3 ">
                                            <select id="txtStateIndividual"
                                                data-placeholder="Please select State"></select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Religion / Nation</label>
                                        <div class="col-sm-6 d-flex gap-1">
                                            <input type="text" class="form-control" id="txtReligionIndividual">
                                            <input type="text" class="form-control" id="txtNationIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Purpose Of Stay</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtPurposeIndividual">
                                        </div>
                                    </div>



                                </div>

                                <!-- RIGHT COLUMN (Communications) -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Address</label>
                                        <div class="col-sm-6">
                                            <textarea class="form-control" rows="10" id="txtAddressIndividual"
                                                style="height: 85px;"></textarea>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Telephone</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtTelephoneIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Hand Phone</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtHandPhoneIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Fax</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtFaxIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Email</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtEmailIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Website</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtWebsiteIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Company</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtCompany2Individual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Business Title</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtBusinessTitleIndividual">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <!-- ================= TAB 2 ================= -->
                        <div class="tab-pane fade" id="tab-ind-internal">

                            <div class="row">

                                <!-- LEFT -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Company</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtCompanyIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Tax Code</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtTaxIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Bus. Address</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtBusAddressIndividual">
                                        </div>
                                    </div>

                                    <hr class="my-2">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Salutation</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtSalutationIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">VIP</label>
                                        <div class="col-sm-6">
                                            <select id="txtVIPIndividual" class="ms-2"
                                                data-placeholder="Please select VIP"></select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">VIP Reason</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtReasonIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Passport</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtPassportIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Identity Card</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtCardIndividual">
                                        </div>
                                    </div>

                                </div>

                                <!-- RIGHT -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Date of Birth</label>
                                        <div class="col-sm-3">
                                            <input type="date" class="form-control" id="txtDobIndividual" disabled
                                                data-business-date>
                                        </div>
                                        <div class="col-sm-2">
                                            <input type="checkbox" class="form-check-input"
                                                id="txtCheckboxDobIndividual" checked>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Active</label>
                                        <div class="col-md-2">
                                            <input type="checkbox" class="form-check-input" id="txtActiveIndividual"
                                                checked>
                                        </div>
                                        <label class="col-md-2 col-form-label text-end">Contact</label>
                                        <div class="col-md-2">
                                            <input type="checkbox" class="form-check-input" id="txtContactIndividual">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Keyword</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtKeywordIndividual">
                                        </div>
                                    </div>

                                    <hr class="my-2">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Black list</label>

                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="blackListReasonIndividual"
                                                name="blackListReasonIndividual" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-sm-1">
                                            <input type="checkbox" class="form-check-input" id="blackListIndividual"
                                                name="blackListIndividual">
                                        </div>
                                    </div>


                                    <div class="row align-items-start">
                                        <label class="col-sm-2 col-form-label text-end">Notes</label>
                                        <div class="col-sm-6">
                                            <textarea class="form-control form-control-sm note-textarea" rows="3"
                                                id="txtNoteIndividual"></textarea>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>



        <!-- Profile Company / TA / Source -->
        <div class="main-infor mt-3" id="profile_com_ta_source" style="display:none">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">

                    <!-- Tabs -->
                    <ul class="nav nav-tabs mb-2" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-main"
                                type="button" role="tab">
                                Address & Communications
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-internal" type="button"
                                role="tab">
                                Tax / Internal / Status
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content">

                        <!-- TAB 1 : Address & Communications -->
                        <div class="tab-pane fade show active" id="tab-main" role="tabpanel">
                            <div class="row">

                                <!-- Left column : Address -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end fw-semibold">
                                            Code <span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-5">
                                            <input type="text" class="form-control " id="txtCodeCOM" name="codeCOM"
                                                data-bs-toggle="tooltip"
                                                title="The contact code will have a fixed length of 13 characters."
                                                data-bs-placement="right">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Account</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control " id="txtAccountCOM"
                                                name="accountCOM">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Address</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control " id="txtAddressCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">
                                            City / Country <span class="text-danger">*</span>
                                        </label>
                                        <div class="col-md-3">
                                            <select id="txtCityCOM" class="form-select-sm"
                                                data-placeholder="Please select City">

                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <select id="txtCountryCOM" class="form-select-sm"
                                                data-placeholder="Please select Country">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Postal / State</label>
                                        <div class="col-md-2">
                                            <input type="text" class="form-control form-control-sm" id="txtPostalCOM">
                                        </div>
                                        <div class="col-md-4">
                                            <select id="txtStateCOM" class="form-select-sm"
                                                data-placeholder="Please select State">

                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right column : Communications -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Telephone</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm"
                                                id="txtTelephoneCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Hand Phone</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm"
                                                id="txtHandPhoneCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Contact Name</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm"
                                                id="txtContactNameCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Email</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm" id="txtEmailCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Website</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm" id="txtWebsiteCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Company</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm" id="txtCompany2COM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center">
                                        <label class="col-md-2 col-form-label text-end">Business Title</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm" id="txtBusTitleCOM">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- TAB 2 : Tax / Internal / Status -->
                        <div class="tab-pane fade" id="tab-internal" role="tabpanel">
                            <div class="row">

                                <!-- Left column : Tax + Internal -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Company</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm" id="txtCompanyCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Tax Code</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm" id="txtTaxCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-2">
                                        <label class="col-md-4 col-form-label text-end">Bus. Address</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm"
                                                id="txtBusAddressCOM">
                                        </div>
                                    </div>

                                    <hr class="my-2">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Owner</label>
                                        <div class="col-md-6">
                                            <select id="txtOwnerCOM" class="form-select-sm"
                                                data-placeholder="Please select Owner">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Territory</label>
                                        <div class="col-md-6">
                                            <select id="txtTerritoryCOM" class="form-select-sm"
                                                data-placeholder="Please select Territory">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Type</label>
                                        <div class="col-md-6">
                                            <select id="txtCompanyTypeCOM" class="form-select-sm"
                                                data-placeholder="Please select Type">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">A/R No</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm" id="txtARCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Currency</label>
                                        <div class="col-md-6">
                                            <select id="txtCurrencyCOM" class="form-select-sm"
                                                data-placeholder="Please select Currency">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-4 col-form-label text-end">Sale In Charge</label>
                                        <div class="col-md-6">
                                            <select id="txtSaleInChargeCOM" class="form-select-sm"
                                                data-placeholder="Please select Sale In Charge">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center">
                                        <label class="col-md-4 col-form-label text-end">Market Type</label>
                                        <div class="col-md-6">
                                            <select id="txtMarketTypeCOM" class="form-select-sm"
                                                data-placeholder="Please select Market Type">

                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Right column : Status + Notes -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Market</label>
                                        <div class="col-md-6">
                                            <select id="txtMarketCOM" class="form-select-sm"
                                                data-placeholder="Please select Market">

                                            </select>
                                        </div>
                                    </div>
                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Active</label>
                                        <div class="col-md-6">
                                            <input type="checkbox" class="form-check-input" id="txtActiveCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-md-2 col-form-label text-end">Black list</label>
                                        <div class="col-md-6">
                                            <input type="text" class="form-control form-control-sm"
                                                id="blackListReasonCOM" name="blackListReasonCOM" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-1">
                                            <input type="checkbox" class="form-check-input" id="blackListCOM">
                                        </div>
                                    </div>

                                    <div class="row align-items-start">
                                        <label class="col-md-2 col-form-label text-end">Notes</label>
                                        <div class="col-md-10">
                                            <textarea id="txtNoteCOM" class="form-control form-control-sm note-textarea"
                                                rows="20"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>




        <!--Profile group-->
        <div class="main-infor mt-3" id="profile_group" style="display:none">

            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <ul class="nav nav-tabs mb-2">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#group-tab-address"
                                type="button">
                                Address Information
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#group-tab-internal"
                                type="button">
                                Internal / Communications / Attributes
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content">

                        <!-- TAB 1 -->
                        <div class="tab-pane fade show active" id="group-tab-address">

                            <div class="row">

                                <!-- LEFT COLUMN -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">
                                            Code <span class="text-danger">*</span>
                                        </label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtCodeGroup" name="codeGroup"
                                                data-bs-toggle="tooltip"
                                                title="The contact code will have a fixed length of 13 characters."
                                                data-bs-placement="right">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Group Name <span
                                                class="text-danger">*</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtGroupNameGroup"
                                                name="groupNameGroup">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Language</label>
                                        <div class="col-sm-6">
                                            <select id="txtLanguageGroup" data-placeholder="Please select Language"
                                                class="ms-2 ">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Address</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtAddressGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Home Address</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtHomeAddressGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">City</label>
                                        <div class="col-sm-6">
                                            <select id="txtCityGroup" data-placeholder="Please select City"
                                                class="ms-2 ">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Postal Code</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtPostalCodeGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">
                                            Country / State <span class="text-danger">*</span>
                                        </label>
                                        <div class="col-sm-3">
                                            <select id="txtCountryGroup" class="ms-2"
                                                data-placeholder="Please select Country">

                                            </select>

                                        </div>
                                        <div class="col-sm-3">
                                            <select id="txtStateGroup" data-placeholder="Please select State">

                                            </select>

                                        </div>
                                    </div>

                                </div>

                                <!-- RIGHT COLUMN -->
                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Search Name</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" id="searchName">
                                        </div>
                                    </div>

                                    <div class="row align-items-start">
                                        <label class="col-sm-2 col-form-label text-end"></label>
                                        <div class="col-md-8">
                                            <div id="profileGroupGrid" class="gridContainer"></div>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>

                        <!-- TAB 2 -->
                        <div class="tab-pane fade" id="group-tab-internal">

                            <div class="row">

                                <div class="col-md-6 mui-card">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Acct .Contact</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtContactGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Pref .Curr</label>
                                        <div class="col-sm-6">
                                            <select id="txtCurrencyGroup" class="ms-2"
                                                data-placeholder="Please select Currency">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Account Type</label>
                                        <div class="col-sm-6">
                                            <select class="form-select"></select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">VIP</label>
                                        <div class="col-sm-6">
                                            <select id="txtVIPGroup" class="ms-2" data-placeholder="Please select VIP">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">VIP Reason</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtVIPReasonGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-4 col-form-label text-end">Notes</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtNotesGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-2">
                                        <label class="col-sm-4 col-form-label text-end">History</label>
                                        <div class="col-sm-6">
                                            <input type="checkbox" class="form-check-input" id="txtHistory">
                                        </div>
                                    </div>

                                </div>

                                <div class="col-md-6 mui-card">
                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Telephone</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtTelephongGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Email</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtEmailGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Website</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtWebsiteGroup">
                                        </div>
                                    </div>

                                    <div class="row align-items-center mb-2">
                                        <label class="col-sm-2 col-form-label text-end">Hand Phone</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtHandPhoneGroup">
                                        </div>
                                    </div>

                                    <hr class="my-2">

                                    <div class="row align-items-center mb-1">
                                        <label class="col-sm-2 col-form-label text-end">Rate Code</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" disabled>
                                        </div>
                                    </div>

                                    <div class="row align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">A/R No</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" disabled>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>


        <!--Profile contact-->
        <div class="main-infor mt-3" id="profile_contact">
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <!-- Tabs -->
                    <ul class="nav nav-tabs mb-2">
                        <li class="nav-item">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#contact-tab-address"
                                type="button">
                                Address Information
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#contact-tab-other"
                                type="button">
                                Other Information
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content">

                        <!-- TAB 1: ADDRESS INFORMATION -->
                        <div class="tab-pane fade show active" id="contact-tab-address">
                            <div class="row ">

                                <!-- LEFT COLUMN -->
                                <div class="col-md-6 mui-card">

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">
                                            Code <span class="text-danger">*</span>
                                        </label>
                                        <div class="col-sm-5">
                                            <input type="text" class="form-control" id="txtCodeContact"
                                                name="CodeContact" data-bs-toggle="tooltip"
                                                title="The contact code will have a fixed length of 13 characters."
                                                data-bs-placement="right">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">
                                            Full Name <span class="text-danger">*</span>
                                        </label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtFullNameContact"
                                                name="fullNameContact" data-bs-toggle="tooltip"
                                                title="Please typing as below: LastName MiddleName, FirstName, Mr. OR LastName MiddleName, FirstName."
                                                data-bs-placement="right">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">First / Last Name <span
                                                class="text-danger">* </span> </label>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" id="txtFirstNameContact"
                                                name="firstNameContact">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" id="txtLastContact"
                                                name="lastNameContact">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Middle Name</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtMiddleNameContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Position / Dept</label>
                                        <div class="col-sm-6 d-flex gap-2">
                                            <input type="text" class="form-control" id="txtPositionContact">
                                            <input type="text" class="form-control" id="txtDeptContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Language / Title</label>
                                        <div class="col-sm-3">
                                            <select id="txtLanguageContact" class="ms-2"
                                                data-placeholder="Please select Language">

                                            </select>
                                        </div>
                                        <div class="col-sm-3">
                                            <select id="txtTitleContact" data-placeholder="Please select Title">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Salutation</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtSalulationContact">
                                        </div>
                                    </div>
                                </div>

                                <!-- RIGHT COLUMN -->
                                <div class="col-md-6 mui-card">
                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Address</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtAddressContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Home Address</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtHomeAddressContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">City</label>
                                        <div class="col-sm-6">
                                            <select id="txtCityContact" class="ms-2"
                                                data-placeholder="Please select City">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Postal Code</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtPostalCodeContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Country / State</label>
                                        <div class="col-sm-3">
                                            <select id="txtCountryContact" class="ms-2"
                                                data-placeholder="Please select Country">
                                            </select>
                                        </div>
                                        <div class="col-sm-3">
                                            <select id="txtStateContact" data-placeholder="Please select State">
                                            </select>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- TAB 2: OTHER INFORMATION -->
                        <div class="tab-pane fade" id="contact-tab-other">
                            <div class="row">

                                <div class="col-md-6 mui-card">

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Owner</label>
                                        <div class="col-sm-6">
                                            <select id="txtOwnerContact" class="ms-2"
                                                data-placeholder="Please select Owner">
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Territory</label>
                                        <div class="col-sm-6">
                                            <select id="txtTerritoryContact" class="ms-2"
                                                data-placeholder="Please select Territory">

                                            </select>
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">A/R No</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtARContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Date of birth</label>
                                        <div class="col-sm-6">
                                            <input type="date" class="form-control" id="txtDobContact" disabled
                                                data-business-date>
                                        </div>
                                        <div class="col-sm-2">
                                            <input type="checkbox" class="form-check-input mt-2" checked
                                                id="txtCheckboxDobContact">
                                        </div>
                                    </div>

                                    <div class="row mb-2 align-items-center">
                                        <label class="col-sm-4 col-form-label text-end">Active</label>
                                        <div class="col-sm-6">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" id="txtActiveContact">
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-6 mui-card">
                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Telephone</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtTelephoneContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Fax</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtFaxContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Email</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtEmailContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Website</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtWebsiteContact">
                                        </div>
                                    </div>

                                    <div class="row mb-1 align-items-center">
                                        <label class="col-sm-2 col-form-label text-end">Hand Phone</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control" id="txtHandPhoneContact">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Search -->
<div class="modal fade modal-search" id="modalIndividualSearch" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-md">
        <div class="modal-content">

            <!-- Header -->
            <div class="modal-header py-2">
                <h6 class="modal-title mb-0">Search</h6>
                <button type="button" class="btn-close" onclick="closeModalSearch()"></button>
            </div>

            <!-- Body -->
            <div class="modal-body pt-2">

                <!-- Search box -->
                <div class="row mb-1 align-items-center">
                    <label class="col-sm-2 col-form-label text-end">Search Name</label>
                    <div class="col-sm-4">
                        <input type="text" id="nameIndividual" class="form-control form-control-sm"
                            placeholder="Enter user name" />
                    </div>
                    <label class="col-sm-1 col-form-label text-end">First</label>
                    <div class="col-sm-4">
                        <input type="text" id="firstNameIndividual" class="form-control form-control-sm"
                            placeholder="Enter user name" />
                    </div>
                </div>

                <!-- Result table -->
                <div id="profileIndividualGrid" class="gridContainer"></div>


            </div>

            <!-- Footer -->
            <div class="modal-footer py-2">
                <button type="button" class="btn btn-sm btn-secondary" onclick="closeModalSearch()">Close</button>
            </div>

        </div>
    </div>
</div>


<script>
    // Mở Modal Search
    function openModalSearch() {
        $('#modalIndividualSearch').modal('show');
    }

    function closeModalSearch() {
        $('#firstNameIndividual').val('');
        $('#modalIndividualSearch').modal('hide');
    }

    // Gọi function getProfileGroupSreach khi bấm enter
    document.getElementById("searchName").addEventListener("keydown", async function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            const value = event.target.value;
            await getProfileGroupSreach(value);

        }
    });
    function bindIndividualSearch() {
        const inputs = ['nameIndividual', 'firstNameIndividual'];

        inputs.forEach(id => {
            const el = document.getElementById(id);
            if (!el) return;

            el.addEventListener('keydown', async function (event) {
                if (event.key === 'Enter') {
                    event.preventDefault();

                    const searchModel = {
                        name: document.getElementById('nameIndividual').value.trim(),
                        firstName: document.getElementById('firstNameIndividual').value.trim()
                    };

                    await getProfileIndividualSreach(searchModel);
                }
            });
        });
    }

    bindIndividualSearch();


    // Function Load Grid

    async function initializeProfileIndividualGrid(data) {
        $("#profileIndividualGrid").dxDataGrid({
            dataSource: data || [],
            showBorders: true,
            selection: { mode: "single" },
            paging: { pageSize: 20 },
            height: "300px",
            pager: {
                showPageSizeSelector: true,
                allowedPageSizes: [5, 10, 20],
                showInfo: true
            },
            filterRow: { visible: true },
            columns: [
                { dataField: "id", caption: "ID", visible: false },
                { dataField: "name", caption: "Name" },

            ],
            scrolling: {
                mode: "standard", // Không dùng virtual để footer hiển thị đúng
                showScrollbar: "always",
                scrollByContent: true
            },
            filterRow: {
                visible: true,
                applyFilter: "auto"
            },
            // 🔥 Quan trọng: gán selectedRowData khi click chọn
            onRowClick: async function ( e ) {
                selectedRowData = e.data.id; // 🔥 lấy data của row vừa click
                console.log("Selected Row (RowClick):", selectedRowData);
                await selectIndividual(selectedRowData);
            },
            noDataText: "No records to display" // hiển thị text khi chưa có dữ liệu
        });
    }

    // Function Load Grid
    async function initializeProfileGroupGrid(data) {
        $("#profileGroupGrid").dxDataGrid({
            dataSource: data || [],
            showBorders: true,
            selection: { mode: "single" },
            paging: { pageSize: 20 },
            height: "300px",
            pager: {
                showPageSizeSelector: true,
                allowedPageSizes: [5, 10, 20],
                showInfo: true
            },
            filterRow: { visible: true },
            columns: [
                { dataField: "id", caption: "ID", visible: false },
                { dataField: "account", caption: "Group Name" },

            ],
            scrolling: {
                mode: "standard", // Không dùng virtual để footer hiển thị đúng
                showScrollbar: "always",
                scrollByContent: true
            },
            filterRow: {
                visible: true,
                applyFilter: "auto"
            },
            // 🔥 Quan trọng: gán selectedRowData khi click chọn
            onRowClick: function (e) {
                selectedRowData = e.data; // 🔥 lấy data của row vừa click
                console.log("Selected Row (RowClick):", selectedRowData);
                selectGroup(selectedRowData);
            },
            noDataText: "No records to display" // hiển thị text khi chưa có dữ liệu
        });
    }

    // Function Fill by ID
    async function selectIndividual(id) {
        try {
            $("#loadingSpinner").show();
            const res = await $.ajax({
                url: 'FindIndividualByID/',
                method: "GET",
                data: { id: id },
            });
            if (!res?.success) {
                showToast('Error', res?.message || 'Failed to load Group Name.', false);
                return;
            }

            const pkg = res.data;
            console.log('data', pkg);

            initializeProfileGroupGrid(pkg);
            $("#loadingSpinner").hide();

        } catch (error) {
            console.error(error);
            $("#loadingSpinner").hide();

        }

    }

    // Function chọn ảnh
    function displaySelectedImage(event, elementId) {
        const selectedImage = document.getElementById(elementId);
        const fileInput = event.target;

        if (fileInput.files && fileInput.files[0]) {
            const reader = new FileReader();

            reader.onload = function (e) {
                selectedImage.src = e.target.result;
            };

            reader.readAsDataURL(fileInput.files[0]);
        }
    }


    // Function ProfileGroupSreach
    async function getProfileGroupSreach(value) {
        try {
            $("#loadingSpinner").show();
            const res = await $.ajax({
                url: '/ProfileGroupSreach/',
                method: "GET",
                data: { GroupName: value },
            });
            if (!res?.success) {
                showToast('Error', res?.message || 'Failed to load Group Name.', false);
                return;
            }

            const pkg = res.data;
            initializeProfileGroupGrid(pkg);
            $("#loadingSpinner").hide();

        } catch (error) {
            console.error(error);
            $("#loadingSpinner").hide();

        }

    }
    async function getProfileIndividualSreach(value) {
        try {
            $("#loadingSpinner").show();
            const res = await $.ajax({
                url: '/ProfileIndividualSreach/',
                method: "GET",
                data: { LastName: value.name, FirstName: value.firstName },
            });
            if (!res?.success) {
                showToast('Error', res?.message || 'Failed to load Group Name.', false);
                return;
            }

            const pkg = res.data;
            initializeProfileIndividualGrid(pkg);
            $("#loadingSpinner").hide();

        } catch (error) {
            console.error(error);
            $("#loadingSpinner").hide();

        }

    }

    $(document).ready(async function () {
        await setSelect2();
        getAllLanguage();
        getAllTitle();
        getAllNationality();
        getAllCountry();
        getAllState();
        getAllCity();
        getAllVIP();
        getPersonInCharge2();
        getAllOwner();
        getAllTerritory();
        getCompanyType();
        getCurrency();
        getMarketType();
        $('#form_profile').hide();
        $('#profileTypeModal').modal('show');
        initializeProfileGroupGrid();
        initializeProfileIndividualGrid();
    });

    var profileTypeValue = 0;
    var profileTypeLabel = '';
    function chooseProfileType() {
        var radios = document.getElementsByName('inlineRadioOptions');
        for (var i = 0; i < radios.length; i++) {
            if (radios[i].checked) {
                profileTypeValue = radios[i].value;
                profileTypeLabel = document.querySelector('label[for="' + radios[i].id + '"]').innerText;
                $('#profileTypeModal').modal('hide');
                $('#chooseProfileTypeLabel').text(profileTypeLabel);
                if (profileTypeValue == '0') {
                    $('#profile_individual').show();
                    $('#profile_com_ta_source').hide();
                    $('#profile_group').hide();
                    $('#profile_contact').hide();
                }
                else if (profileTypeValue == '1') {
                    $('#profile_individual').hide();
                    $('#profile_com_ta_source').show();
                    $('#profile_group').hide();
                    $('#profile_contact').hide();
                }
                else if (profileTypeValue == '2') {
                    $('#profile_individual').hide();
                    $('#profile_com_ta_source').show();
                    $('#profile_group').hide();
                    $('#profile_contact').hide();
                }
                else if (profileTypeValue == '3') {
                    $('#profile_individual').hide();
                    $('#profile_com_ta_source').show();
                    $('#profile_group').hide();
                    $('#profile_contact').hide();
                }
                else if (profileTypeValue == '4') {
                    $('#profile_individual').hide();
                    $('#profile_com_ta_source').hide();
                    $('#profile_group').show();
                    $('#profile_contact').hide();
                }
                else if (profileTypeValue == '5') {
                    $('#profile_individual').hide();
                    $('#profile_com_ta_source').hide();
                    $('#profile_group').hide();
                    $('#profile_contact').show();
                }
                $('#form_profile').show();
                return;
            }
        }

    }
    async function setSelect2() {
        const ids = [
            "#select-beast-empty", "#txtLanguageIndividual", "#txtTitleIndividual",
            "#txtNationalityIndividual", "#txtCountryIndividual", "#txtStateIndividual",
            "#txtCityIndividual", "#txtVIPIndividual", "#txtCityCOM", "#txtCountryCOM",
            "#txtStateCOM", "#txtOwnerCOM", "#txtTerritoryCOM", "#txtCompanyTypeCOM",
            "#txtCurrencyCOM", "#txtMarketTypeCOM", "#txtMarketCOM", "#txtStateGroup",
            "#txtCountryGroup", "#txtCityGroup", "#txtLanguageGroup", "#txtCurrencyGroup",
            "#txtVIPGroup", "#txtLanguageContact", "#txtTitleContact", "#txtCityContact",
            "#txtStateContact", "#txtCountryContact", "#txtOwnerContact", "#txtTerritoryContact", "#txtSaleInChargeCOM"
        ];

        for (const id of ids) {
            if ($(id).length) {
                new TomSelect(id, {
                    allowEmptyOption: true,
                    create: true,
                    plugins: ['clear_button'], // nút xoá tất cả

                });
            }
        }
    }
    function closeFormProfile() {
        $('#form_profile').hide();
        $('#profileTypeModal').modal('show');

    }
    // Hàm dùng tách name dùng chung có thể tái sử dụng 
    function checkFullName(options) {
        return new Promise(function (resolve, reject) {

            const {
                fullNameSelector,
                firstNameSelector,
                middleNameSelector,
                lastNameSelector,
                salutationSelector,
                titleSelector, // optional (TomSelect)
                idForm // ID Form
            } = options;

            const $fullName = $(fullNameSelector);
            if (!$fullName.length) {
                resolve(true);
                return;
            }

            const input = $fullName.val().trim();
            if (input === '') {
                resolve(true);
                return;
            }

            $.ajax({
                url: '/Profile/FullNameChange',
                type: 'POST',
                dataType: 'json',
                headers: {
                    "X-CSRF-TOKEN-HEADERNAME": $('input[name="__RequestVerificationToken"]').val()
                },
                data: {
                    fullName: input
                },
                success: function (res) {

                    if (res && res.success) {

                        // Gán lại FullName
                        $fullName.val(res.fullName);

                        if (firstNameSelector)
                            $(firstNameSelector).val(res.firstName || '');

                        if (middleNameSelector)
                            $(middleNameSelector).val(res.middleName || '');

                        if (lastNameSelector)
                            $(lastNameSelector).val(res.lastName || '');

                        if (salutationSelector)
                            $(salutationSelector).val(res.salutation || '');

                        if (res.titleID && titleSelector) {
                            let select = $(titleSelector)[0]?.tomselect;
                            if (select) select.setValue(res.titleID);
                        }

                        resolve(true);
                    } else {
                        applyValidationErrors(res.errors, idForm);
                        resolve(false);
                    }
                },
                error: function () {
                    reject(false);
                }
            });
        });
    }

    // Gọi hàm tách name 
    $('#txtFullNameIndividual').on('blur', function () {
        checkFullName({
            fullNameSelector: '#txtFullNameIndividual',
            firstNameSelector: '#txtFirstNameIndividual',
            middleNameSelector: '#txtMiddleNameIndividual',
            lastNameSelector: '#txtLastNameIndividual',
            salutationSelector: '#txtSalutationIndividual',
            titleSelector: '#txtTitleIndividual',
            idForm: "#profile_individual"
        });
    });
    $('#txtFullNameContact').on('blur', function () {
        checkFullName({
            fullNameSelector: '#txtFullNameContact',
            firstNameSelector: '#txtFirstNameContact',
            middleNameSelector: '#txtMiddleNameContact',
            lastNameSelector: '#txtLastContact',
            salutationSelector: '#txtSalulationContact',
            titleSelector: '#txtTitleContact',
            idForm: "#profile_contact"
        });
    });

    function getAllLanguage() {
        $.ajax({
            url: '/Profile/GetAllLanguage',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtLanguageIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa danh sách options cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn option mặc định

                    let select2 = $('#txtLanguageGroup')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa danh sách options cũ

                    result.forEach(item => {
                        select2.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select2.setValue('0'); // Chọn option mặc định

                    let select3 = $('#txtLanguageContact')[0].tomselect; // Lấy instance của TomSelect
                    select3.clear(); // Xóa giá trị hiện tại
                    select3.clearOptions(); // Xóa danh sách options cũ

                    result.forEach(item => {
                        select3.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select3.setValue('0'); // Chọn option mặc định
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách ngôn ngữ hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllTitle() {
        $.ajax({
            url: '/Profile/GetAllTitle',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtTitleIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định

                    let select3 = $('#txtTitleContact')[0].tomselect; // Lấy instance của TomSelect
                    select3.clear(); // Xóa giá trị hiện tại
                    select3.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select3.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select3.setValue('0'); // Chọn giá trị mặc định
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllNationality() {
        $.ajax({
            url: '/Profile/GetAllNationality',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtNationalityIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllCountry() {
        $.ajax({
            url: '/Profile/GetAllCountry',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtCountryIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });
                    select.setValue('0'); // Chọn giá trị mặc định


                    let select2 = $('#txtCountryCOM')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select2.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });
                    select2.setValue('0'); // Chọn giá trị mặc định


                    let select3 = $('#txtCountryGroup')[0].tomselect; // Lấy instance của TomSelect
                    select3.clear(); // Xóa giá trị hiện tại
                    select3.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select3.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });
                    select3.setValue('0'); // Chọn giá trị mặc định

                    let select4 = $('#txtCountryContact')[0].tomselect; // Lấy instance của TomSelect
                    select4.clear(); // Xóa giá trị hiện tại
                    select4.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select4.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });
                    select4.setValue('0'); // Chọn giá trị mặc định
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllState() {
        $.ajax({
            url: '/Profile/GetAllState',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtStateIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        // select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                        select.addOption({ value: item.id, text: `${item.stateName}` });
                    });
                    select.setValue('0'); // Chọn giá trị mặc định

                    let select2 = $('#txtStateCOM')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ
                    result.forEach(item => {
                        select2.addOption({ value: item.id, text: `${item.stateName}` });
                    });
                    select2.setValue('0'); // Chọn giá trị mặc định

                    let select3 = $('#txtStateGroup')[0].tomselect; // Lấy instance của TomSelect
                    select3.clear(); // Xóa giá trị hiện tại
                    select3.clearOptions(); // Xóa tất cả option cũ
                    result.forEach(item => {
                        select3.addOption({ value: item.id, text: `${item.stateName}` });
                    });
                    select3.setValue('0'); // Chọn giá trị mặc định

                    let select4 = $('#txtStateContact')[0].tomselect; // Lấy instance của TomSelect
                    select4.clear(); // Xóa giá trị hiện tại
                    select4.clearOptions(); // Xóa tất cả option cũ
                    result.forEach(item => {
                        select4.addOption({ value: item.id, text: `${item.stateName}` });
                    });
                    select4.setValue('0'); // Chọn giá trị mặc định
                }
                else {
                    let select = $('#txtStateIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    select.setValue('0');

                    let select2 = $('#txtStateCOM')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ
                    select2.setValue('0');

                    let select3 = $('#txtStateGroup')[0].tomselect; // Lấy instance của TomSelect
                    select3.clear(); // Xóa giá trị hiện tại
                    select3.clearOptions(); // Xóa tất cả option cũ
                    select3.setValue('0');

                    let select4 = $('#txtStateContact')[0].tomselect; // Lấy instance của TomSelect
                    select4.clear(); // Xóa giá trị hiện tại
                    select4.clearOptions(); // Xóa tất cả option cũ
                    select4.setValue('0');
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getPersonInCharge2() {
        $.ajax({
            url: '/Administration/PersonInChargeData',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {

                if (result.length > 0) {
                    let select = $('#txtSaleInChargeCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định


                    // let select2 = $('#txtCurrencyGroup')[0].tomselect; // Lấy instance của TomSelect
                    // select2.clear(); // Xóa giá trị hiện tại
                    // select2.clearOptions(); // Xóa tất cả option cũ

                    // result.forEach(item => {
                    //     select2.addOption({ value: item.id, text: `${item.description}` });
                    // });

                    // select2.setValue('0'); // Chọn giá trị mặc định
                }
                else {
                    let select = $('#txtSaleInChargeCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    select.setValue('0');

                    // let select2 = $('#txtCurrencyGroup')[0].tomselect; // Lấy instance của TomSelect
                    // select2.clear(); // Xóa giá trị hiện tại
                    // select2.clearOptions(); // Xóa tất cả option cũ
                    // select2.setValue('0');
                }

            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllCity() {
        $.ajax({
            url: '/Profile/GetAllCity',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtCityIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.code, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định

                    let select2 = $('#txtCityCOM')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select2.addOption({ value: item.code, text: `${item.code} - ${item.name}` });
                    });

                    select2.setValue('0'); // Chọn giá trị mặc định

                    let select3 = $('#txtCityGroup')[0].tomselect; // Lấy instance của TomSelect
                    select3.clear(); // Xóa giá trị hiện tại
                    select3.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select3.addOption({ value: item.code, text: `${item.code} - ${item.name}` });
                    });

                    select3.setValue('0'); // Chọn giá trị mặc định

                    let select4 = $('#txtCityContact')[0].tomselect; // Lấy instance của TomSelect
                    select4.clear(); // Xóa giá trị hiện tại
                    select4.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select4.addOption({ value: item.code, text: `${item.code} - ${item.name}` });
                    });

                    select4.setValue('0'); // Chọn giá trị mặc định
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllVIP() {
        $.ajax({
            url: '/Profile/GetAllVIP',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtVIPIndividual')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc

                    let select2 = $('#txtVIPGroup')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select2.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select2.setValue('0'); // Chọn giá trị mặc định

                    select.on('change', function (value) {
                        if (!value || value === '0') {
                            $('#txtReasonIndividual').val('');
                            return;
                        }

                        // Lấy option đang chọn
                        let option = select.options[value];

                        if (option) {
                            // option.text = "CODE - NAME"
                            // Nếu chỉ muốn lấy NAME
                            let name = option.text.split(' - ').slice(1).join(' - ');

                            $('#txtReasonIndividual').val(name);
                        }
                    });
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllOwner() {
        $.ajax({
            url: '/Profile/GetAllOwner',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtOwnerCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định

                    let select2 = $('#txtOwnerContact')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select2.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select2.setValue('0'); // Chọn giá trị mặc định
                }
            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getAllTerritory() {
        $.ajax({
            url: '/Profile/GetAllTerritory',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtTerritoryCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định

                    let select2 = $('#txtTerritoryContact')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select2.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select2.setValue('0'); // Chọn giá trị mặc định
                }
                else {
                    let select = $('#txtTerritoryCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    select.setValue('0');

                    let select2 = $('#txtTerritoryContact')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ
                    select2.setValue('0');
                }

            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getCompanyType() {
        $.ajax({
            url: '/Profile/GetAllCompanyType',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtCompanyTypeCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.code} - ${item.name}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định
                }
                else {
                    let select = $('#txtCompanyTypeCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    select.setValue('0');
                }

            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    function getCurrency() {
        $.ajax({
            url: '/Profile/GetAllCurrency',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtCurrencyCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.description}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định


                    let select2 = $('#txtCurrencyGroup')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select2.addOption({ value: item.id, text: `${item.description}` });
                    });

                    select2.setValue('0'); // Chọn giá trị mặc định
                }
                else {
                    let select = $('#txtCurrencyCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    select.setValue('0');

                    let select2 = $('#txtCurrencyGroup')[0].tomselect; // Lấy instance của TomSelect
                    select2.clear(); // Xóa giá trị hiện tại
                    select2.clearOptions(); // Xóa tất cả option cũ
                    select2.setValue('0');
                }

            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }


    function getMarketType() {
        $.ajax({
            url: '/Profile/GetMarketType',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtMarketTypeCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.description}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định
                }
                else {
                    let select = $('#txtMarketTypeCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    select.setValue('0');
                }

            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }
    $('#txtMarketTypeCOM').on('change', function () {
        console.log('change');
        getMarket();
    });
    function getMarket() {
        $.ajax({
            url: '/Profile/GetMarketByFK',
            type: 'get',
            dataType: 'json',
            crossDomain: false,
            headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            data: { marketTypeID: $('#txtMarketTypeCOM').val() },
            success: function (result) {
                if (result.length > 0) {
                    let select = $('#txtMarketCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ

                    result.forEach(item => {
                        select.addOption({ value: item.id, text: `${item.description}` });
                    });

                    select.setValue('0'); // Chọn giá trị mặc định
                }
                else {
                    let select = $('#txtMarketCOM')[0].tomselect; // Lấy instance của TomSelect
                    select.clear(); // Xóa giá trị hiện tại
                    select.clearOptions(); // Xóa tất cả option cũ
                    select.setValue('0');
                }

            },
            error: function (xhr, statusText, err) {
                if (xhr.status == 401) {
                    sessionTimeout();
                } else {
                    informBox(TOAST_STATUS.DANGER, "Lỗi tải danh sách tiêu đề hoặc bạn không có quyền tải");
                }
            }
        });
    }

    // Check box của BlackList

    $('#blackListIndividual').on('change', function () {
        const isChecked = this.checked;

        $('#blackListReasonIndividual')
            .prop('disabled', !isChecked)
            .toggleClass('is-invalid', false);
    });
    $('#blackListCOM').on('change', function () {
        const isChecked = this.checked;

        $('#blackListReasonCOM')
            .prop('disabled', !isChecked)
            .toggleClass('is-invalid', false);
    });



    $('#txtCheckboxDobIndividual').on('change', function () {
        $('#txtDobIndividual').prop('disabled', $(this).is(':checked'));
    });
    $('#txtCheckboxDobContact').on('change', function () {
        console.log('changed', this.checked);
        $('#txtDobContact').prop('disabled', $(this).is(':checked'));
    });
    $('#blackListIndividual').change(function () {
        if ($(this).is(':checked')) {
            $('#blackListReasonIndividual').css({
                'background-color': 'black',
                'color': 'white'
            });
        } else {
            $('#blackListReasonIndividual').css({
                'background-color': '',
                'color': ''
            });
        }
    });
    $('#blackListCOM').change(function () {
        if ($(this).is(':checked')) {
            $('#blackListReasonCOM').css({
                'background-color': 'black',
                'color': 'white'
            });
        } else {
            $('#blackListReasonCOM').css({
                'background-color': '',
                'color': ''
            });
        }
    });
    async function saveProfile() {
        var formData = new FormData();
        formData.append('Type', profileTypeValue);
        // individual profile
        if (profileTypeValue == 0) {
            //Valid full name lần cuối trước khi call api
            const individualValid = await checkFullName({
                fullNameSelector: '#txtFullNameIndividual',
                firstNameSelector: '#txtFirstNameIndividual',
                middleNameSelector: '#txtMiddleNameIndividual',
                lastNameSelector: '#txtLastNameIndividual',
                salutationSelector: '#txtSalutationIndividual',
                titleSelector: '#txtTitleIndividual',
                idForm: "#profile_individual"
            });

            if (!individualValid) {
                return;
            }
            formData.append('CodeIndividual', $("#txtCodeIndividual").val());
            formData.append('AccountIndividual', $("#txtFullNameIndividual").val());
            formData.append('LastNameIndivdual', $("#txtLastNameIndividual").val());
            formData.append('FirstNameIndividual', $("#txtFirstNameIndividual").val());
            formData.append('MiddleNameIndividual', $("#txtMiddleNameIndividual").val());
            formData.append('LanguageIndividual', $("#txtLanguageIndividual").val());
            formData.append('TitleIndividual', $("#txtTitleIndividual").val());
            formData.append('NationalityIndividual', $("#txtNationalityIndividual").val());
            formData.append('CountryIndividual', $("#txtCountryIndividual").val());
            formData.append('CityIndividual', $("#txtCityIndividual").val());
            formData.append('PostalIndividual', $("#txtPostalIndividual").val());
            formData.append('ReligionIndividual', $("#txtReligionIndividual").val());
            formData.append('NationIndividual', $("#txtNationIndividual").val());
            formData.append('StateIndividual', $("#txtStateIndividual").val());
            formData.append('PurposeIndividual', $("#txtPurposeIndividual").val());
            formData.append('AddressIndividual', $("#txtAddressIndividual").val());
            formData.append('SalutationIndividual', $("#txtSalutationIndividual").val());
            formData.append('VIPIndividual', $("#txtVIPIndividual").val());
            formData.append('ReasonIndividual', $("#txtReasonIndividual").val());
            formData.append('PrefRoomIndividual', $("#txtPrefRoomIndividual").val());
            formData.append('OtherIndividual', $("#txtOtherIndividual").val());
            formData.append('PassportIndividual', $("#txtPassportIndividual").val());
            formData.append('CardIndividual', $("#txtCardIndividual").val());
            formData.append('DobIndividual', $("#txtDobIndividual").val());
            formData.append('ActiveIndividual', $("#txtActiveIndividual").is(":checked"));
            formData.append('ContactIndividual', $("#txtContactIndividual").is(":checked"));
            formData.append('KeywordIndividual', $("#txtKeywordIndividual").val());
            formData.append('TaxIndividual', $("#txtTaxIndividual").val());
            formData.append('BusAddressIndividual', $("#txtBusAddressIndividual").val());
            formData.append('TelephoneIndividual', $("#txtTelephoneIndividual").val());
            formData.append('HandPhoneIndividual', $("#txtHandPhoneIndividual").val());
            formData.append('FaxIndividual', $("#txtFaxIndividual").val());
            formData.append('EmailIndividual', $("#txtEmailIndividual").val());
            formData.append('WebsiteIndividual', $("#txtWebsiteIndividual").val());
            formData.append('CompanyIndividual', $("#txtCompanyIndividual").val());
            formData.append('Company2Individual', $("#txtCompany2Individual").val());
            formData.append('BusinessTitleIndividual', $("#txtBusinessTitleIndividual").val());
            formData.append('BlackListIndividual', $("#blackListIndividual").is(":checked"));
            formData.append('BlackListReasonIndividual', $("#blackListReasonIndividual").val());
            formData.append('NoteIndividual', $("#txtNoteIndividual").val());
        }

        else if (profileTypeValue == 1 || profileTypeValue == 2 || profileTypeValue == 3) {
            formData.append('CodeCOM', $("#txtCodeCOM").val());
            formData.append('AccountCOM', $("#txtAccountCOM").val());
            formData.append('AddressCOM', $("#txtAddressCOM").val());
            formData.append('CountryCOM', $("#txtCountryCOM").val());
            formData.append('CityCOM', $("#txtCityCOM").val());
            formData.append('PostalCOM', $("#txtPostalCOM").val());
            formData.append('StateCOM', $("#txtStateCOM").val());
            formData.append('FullAccount', $("#txtCompanyCOM").val());
            formData.append('TaxCOM', $("#txtTaxCOM").val());
            formData.append('BusAddressCOM', $("#txtBusAddressCOM").val());
            formData.append('TelephoneCOM', $("#txtTelephoneCOM").val());
            formData.append('ContactNameCOM', $("#txtContactNameCOM").val());
            formData.append('EmailCOM', $("#txtEmailCOM").val());
            formData.append('WebsiteCOM', $("#txtWebsiteCOM").val());
            formData.append('HandPhoneCOM', $("#txtHandPhoneCOM").val());
            formData.append('Company2COM', $("#txtCompany2COM").val());
            formData.append('BusinessTitleCOM', $("#txtBusTitleCOM").val());
            formData.append('OwnerCOM', $("#txtOwnerCOM").val());
            formData.append('TerritoryCOM', $("#txtTerritoryCOM").val());
            formData.append('KeywordCOM', $("#txtKeywordCOM").val());
            formData.append('CompanyTypeCOM', $("#txtCompanyTypeCOM").val());
            formData.append('ARCOM', $("#txtARCOM").val());
            formData.append('CurrencyCOM', $("#txtCurrencyCOM").val());
            formData.append('SaleInChargeCOM', $("#txtSaleInChargeCOM").val());
            formData.append('MarketCOM', $("#txtMarketCOM").val());
            formData.append('ActiveCOM', $("#txtActiveCOM").is(":checked"));
            formData.append('BlackListCOM', $("#blackListCOM").is(":checked"));
            formData.append('BlackListReasonCOM', $("#blackListReasonCOM").val());
            formData.append('NoteCOM', $("#txtNotECOM").val());
        }
        else if (profileTypeValue == 4) {
            formData.append('CodeCOM', $("#txtCodeGroup").val());
            formData.append('GroupNameGroup', $("#txtGroupNameGroup").val());
            formData.append('LanguageGruop', $("#txtLanguageGroup").val());
            formData.append('HomeAddressGroup', $("#txtHomeAddressGroup").val());
            formData.append('AddressGroup', $("#txtHomeAddressGroup").val());
            formData.append('CityGroup', $("#txtCityGroup").val());
            formData.append('PostalGroup', $("#txtPostalCodeGroup").val());
            formData.append('CountryGroup', $("#txtCountryGroup").val());
            formData.append('StateGroup', $("#txtStateGroup").val());
            formData.append('TelephoneGroup', $("#txtTelephoneGroup").val());
            formData.append('EmailGroup', $("#txtEmailGroup").val());
            formData.append('WebsiteGroup', $("#txtWebsiteGroup").val());
            formData.append('HandPhoneGroup', $("#txtHandPhoneGroup").val());
            formData.append('FaxGroup', $("#txtFaxGroup").val());
            formData.append('ContactNameGroup', $("#txtContactGroup").val());
            formData.append('CurrencyGroup', $("#txtCurrencyGroup").val());
            formData.append('VIPGroup', $("#txtVIPIndividual").val());
            formData.append('VIPReason', $("#txtVIPReasonGroup").val());
            formData.append('HistoryGroup', $("#txtHistory").is(":checked"));
            formData.append('NotesGroup', $("#txtNotesGroup").val());
            formData.append('AcctContact', $("#txtContactGroup").val());

        }
        else {
            //Valid full name lần cuối trước khi call api
            const individualValid = await checkFullName({
                fullNameSelector: '#txtFullNameContact',
                firstNameSelector: '#txtFirstNameContact',
                middleNameSelector: '#txtMiddleNameContact',
                lastNameSelector: '#txtLastContact',
                salutationSelector: '#txtSalulationContact',
                titleSelector: '#txtTitleContact',
                idForm: "#profile_contact"
            });

            if (!individualValid) {
                return;
            }
            formData.append('CodeContact', $("#txtCodeContact").val());
            formData.append('AccountContact', $("#txtFullNameContact").val());
            formData.append('LastNameContact', $("#txtLastContact").val());
            formData.append('FirstNameContact', $("#txtFirstNameContact").val());
            formData.append('MiddleNameContact', $("#txtMiddleNameContact").val());
            formData.append('LanguageContact', $("#txtLanguageContact").val());
            formData.append('PositionContact', $("#txtPositionContact").val());
            formData.append('DeptContact', $("#txtDeptContact").val());
            formData.append('TitleContact', $("#txtTitleContact").val());
            formData.append('SalulationContact', $("#txtSalulationContact").val());
            formData.append('AddressContact', $("#txtAddressContact").val());
            formData.append('HomeAddressContact', $("#txtHomeAddressContact").val());
            formData.append('CityContact', $("#txtCityContact").val());
            formData.append('PostalContact', $("#txtPostalCodeContact").val());
            formData.append('CountryContact', $("#txtCountryContact").val());
            formData.append('StateContact', $("#txtStateContact").val());
            formData.append('OwnerContact', $("#txtOwnerContact").val());
            formData.append('TerritoryContact', $("#txtTerritoryContact").val());
            formData.append('ARNoContact', $("#txtARNoContact").val());
            formData.append('DobContact', $("#txtDobContact").val());
            formData.append('TelephoneContact', $("#txtTelephoneContact").val());
            formData.append('FaxContact', $("#txtFaxContact").val());
            formData.append('EmailContact', $("#txtEmailContact").val());
            formData.append('WebsiteContact', $("#txtWebsiteContact").val());
            formData.append('HandPhoneContact', $("#txtHandPhoneContact").val());

        }
        $.ajax({
            url: '/Profile/SaveProfile',
            type: 'POST',
            processData: false,
            contentType: false,
            // headers: { "X-CSRF-TOKEN-HEADERNAME": jQuery("input[name='__RequestVerificationToken']").val() },
            data: formData,
            success: function (res) {
                if (res.success) {
                    resetForm();
                    showToast("Success", res.msg, true);

                } else {
                    var form = res.type;
                    if (form == 0) {
                        applyValidationErrors(res.errors, "#profile_individual");
                    }
                    else if (form == 1 || form == 2 || form == 3) {
                        applyValidationErrors(res.errors, "#profile_com_ta_source");
                    }
                    else if (form == 4) {
                        applyValidationErrors(res.errors, "#profile_group");
                    }
                    else {
                        applyValidationErrors(res.errors, "#profile_contact");
                    }
                }

            },
            error: function (xhr, statusText, err) {

            }
        });

    }




    function resetForm() {
        //id individual
        $("#txtCodeIndividual").val("");
        $("#txtFullNameIndividual").val("");
        $("#txtLastNameIndividual").val("");
        $("#txtFirstNameIndividual").val("");
        $("#txtMiddleNameIndividual").val("");
        let langIndividual = $('#txtLanguageIndividual')[0].tomselect;
        if (langIndividual) {
            langIndividual.clear();       // xóa value đang chọn
            langIndividual.setValue('0'); // set lại default
        }

        let titleIndividual = $('#txtTitleIndividual')[0].tomselect;
        if (titleIndividual) {
            titleIndividual.clear();
            titleIndividual.setValue('0');
        }

        let nationalityIndividual = $('#txtNationalityIndividual')[0].tomselect;
        if (nationalityIndividual) {
            nationalityIndividual.clear();
            nationalityIndividual.setValue('0');
        }

        let countryIndividual = $('#txtCountryIndividual')[0].tomselect;
        if (countryIndividual) {
            countryIndividual.clear();
            countryIndividual.setValue('0');
        }

        let cityIndividual = $('#txtCityIndividual')[0].tomselect;
        if (cityIndividual) {
            cityIndividual.clear();
            cityIndividual.setValue('0');
        }

        $("#txtPostalIndividual").val("");
        $("#txtReligionIndividual").val("");
        $("#txtNationIndividual").val("");
        let stateIndividual = $('#txtStateIndividual')[0].tomselect;
        if (stateIndividual) {
            stateIndividual.clear();
            stateIndividual.setValue('0');
        }

        $("#txtPurposeIndividual").val("");
        $("#txtAddressIndividual").val("");
        $("#txtSalutationIndividual").val("");
        let vipIndividual = $('#txtVIPIndividual')[0].tomselect;
        if (vipIndividual) {
            vipIndividual.clear();
            vipIndividual.setValue('0');
        }

        $("#ReasonIndividual").val("");
        $("#txtPrefRoomIndividual").val("");
        $("#txtOtherIndividual").val("");
        $("#txtPassportIndividual").val("");
        $("#txtCardIndividual").val("");
        $("#txtDobIndividual").val("");
        $("#txtKeywordIndividual").val("");
        $("#txtCompanyIndividual").val("");
        $("#txtTaxIndividual").val("");
        $("#txtBusAddressIndividual").val("");
        $("#txtTelephoneIndividual").val("");
        $("#txtHandPhoneIndividual").val("");
        $("#txtFaxIndividual").val("");
        $("#txtEmailIndividual").val("");
        $("#txtWebsiteIndividual").val("");
        $("#txtTelephtxtCompany2").val("");
        $("#txtBusinessTitleIndividual").val("");
        $("#blackListIndividual").val("");
        $("#txtNoteIndividual").val("");

        // id com
        $("#txtCodeCOM").val();
        $("#txtAccountCOM").val();
        $("#txtAddressCOM").val();
        $("#txtCountryCOM").val();
        $("#txtCityCOM").val();
        $("#txtPostalCOM").val();
        $("#txtStateCOM").val();
        $("#txtCompanyCOM").val();
        $("#txtTaxCOM").val();
        $("#txtBusAddressCOM").val();
        $("#txtTelephoneCOM").val();
        $("#txtContactNameCOM").val();
        $("#txtEmailCOM").val();
        $("#txtWebsiteCOM").val();
        $("#txtHandPhoneCOM").val();
        $("#txtCompany2COM").val();
        $("#txtBusTitleCOM").val();
        $("#txtOwnerCOM").val();
        $("#txtTerritoryCOM").val();
        $("#txtKeywordCOM").val();
        $("#txtCompanyTypeCOM").val();
        $("#txtARCOM").val();
        $("#txtCurrencyCOM").val();
        $("#txtSaleInChargeCOM").val();
        $("#txtMarketCOM").val();
        $("#txtActiveCOM").val();
        $("#txtBlackListCOM").val();
        $("#blackListCOM").val();
        $("#txtNotECOM").val();

        // id group
        $("#txtCodeGroup").val();
        $("#txtGroupNameGroup").val();
        $("#txtLanguageGroup").val();
        $("#txtHomeAddressGroup").val();
        $("#txtAddressGroup").val();
        $("#txtCityGroup").val();
        $("#txtPostalCodeGroup").val();
        $("#txtCountryGroup").val();
        $("#txtStateGroup").val();
        $("#txtTelephoneGroup").val();
        $("#txtEmailGroup").val();
        $("#txtWebsiteGroup").val();
        $("#txtHandPhoneGroup").val();
        $("#txtFaxGroup").val();
        $("#txtContactGroup").val();
        $("#txtCurrencyGroup").val();
        $("#txtVIPIndividual").val();
        $("#txtVIPReasonGroup").val();
        $("#txtHistory").val();

        // id contact
        $("#txtCodeContact").val();
        $("#txtFullNameContact").val();
        $("#txtLastContact").val();
        $("#txtFirstNameContact").val();
        $("#txtMiddleNameContact").val();
        $("#txtLanguageContact").val();
        $("#txtPositionContact").val();
        $("#txtDeptContact").val();
        $("#txtTitleContact").val();
        $("#txtSalulationContact").val();
        $("#txtAddressContact").val();
        $("#txtHomeAddressContact").val();
        $("#txtCityContact").val();
        $("#txtPostalCodeContact").val();
        $("#txtCountryContact").val();
        $("#txtStateContact").val();
        $("#txtOwnerContact").val();
        $("#txtTerritoryContact").val();
        $("#txtARNoContact").val();
        $("#txtDobContact").val();
        $("#txtTelephoneContact").val();
        $("#txtFaxContact").val();
        $("#txtEmailContact").val();
        $("#txtWebsiteContact").val();
        $("#txtHandPhoneContact").val();
    }
</script>
