!function(a){a.jqx.jqxWidget("jqxPasswordInput","",{}),a.extend(a.jqx._jqxPasswordInput.prototype,{defineInstance:function(){var e={width:null,height:null,disabled:!1,rtl:!1,placeHolder:null,showStrength:!1,showStrengthPosition:"right",maxLength:null,minLength:null,showPasswordIcon:!0,strengthTypeRenderer:null,passwordStrength:null,changeType:null,hint:!0,localization:{passwordStrengthString:"Password strength",tooShort:"Too short",weak:"Weak",fair:"Fair",good:"Good",strong:"Strong",showPasswordString:"Show Password"},strengthColors:{tooShort:"rgb(170, 0, 51)",weak:"rgb(170, 0, 51)",fair:"rgb(255, 204, 51)",good:"rgb(45, 152, 243)",strong:"rgb(118, 194, 97)"}};return this===a.jqx._jqxPasswordInput.prototype||a.extend(!0,this,e),e},createInstance:function(){var e=this;e._inDOM=document.body.contains(e.element),e.render()},render:function(){var e,t,i=this,s=a.jqx.browser.browser,n=a.jqx.browser.version;this._browserCheck="msie"!=s||"7.0"!=n&&"8.0"!=n,this.widgetID=i.element.id;if("password"!=this.element.getAttribute("type"))throw"Invalid input type. Please set the type attribute of the input element to password.";this.input=this.element,i.isMaterialized()&&((s=a("<div></div>")).addClass(i.toThemeProperty("jqx-input-group")),this.host.after(s),n=this.element,e=this.host.data(),s.append(n),n=a("<label></label"),this.hint&&(n[0].innerHTML=this.placeHolder),n.addClass(i.toThemeProperty("jqx-input-label")),s.append(n),t=a("<span></span>"),s.append(t),t.addClass(i.toThemeProperty("jqx-input-bar")),s[0].id=this.element.id,this.element.removeAttribute("id"),s[0].style.cssText=this.element.style.cssText,i.input=i.element,this.element.style.cssText="",this.bar=t,this.label=n,this.host=s,this.element=s[0],this.host.data(e),(i=this).template&&(i.bar.addClass(i.toThemeProperty("jqx-"+i.template)),i.label.addClass(i.toThemeProperty("jqx-"+i.template)))),i._hidden=!0,i._setTheme(),i._setAttributes(),i._showPassword(),i._showStrength(),a.jqx.utilities.resize(this.host,function(){var e;if(!i._inDOM)return e=i.element.parentNode,i.element.nextSibling?e.insertBefore(i.icon,i.element.nextSibling):e.appendChild(i.icon),void(i._inDOM=!0);i.element!==document.activeElement&&!i.isMaterialized()||(i._positionIcon(),i.showStrength&&i.host.jqxTooltip("close"))})},refresh:function(e){var t=this;e||(t.removeHandler(t.host,"change.passwordinput"+t.widgetID),t.removeHandler(t.host,"focus.passwordinput"+t.widgetID),t.removeHandler(t.host,"blur.passwordinput"+t.widgetID),t.removeHandler(t.host,"click.passwordinput"+t.widgetID),t.removeHandler(t.host,"keyup.passwordinput"+t.widgetID),t.removeHandler(t.icon,"mousedown.passwordinput"+t.widgetID),t.removeHandler(a(document),"mouseup.passwordinput"+t.widgetID),t.removeHandler(a(document),"mousedown.passwordinput"+t.widgetID),t._setAttributes(),t._setTheme(),t._showPassword(),t._showStrength())},val:function(e){var t=this,i=t.input.value,s="placeholder"in t.input;if(a.isEmptyObject(e)&&""!==e)return i=s||i!==t.placeHolder?i:"";if(!s||e!==i){if(!s){if(""===e)return void(i!==t.placeHolder&&(t.input.value=t.placeHolder,t.input.setAttribute("type","text")));t.input.setAttribute("type","password")}t.input.value=e,s&&t.isMaterialized()&&t._refreshPlaceHolder(),!0===t.showStrength&&t._evaluateStrength()}},propertyChangedHandler:function(e,t,i,s){"theme"===t?a.jqx.utilities.setTheme(i,s,e.host):"disabled"==t?e.disabled?(e.element.setAttribute("disabled","disabled"),e.element.className+=" "+e.toThemeProperty("jqx-fill-state-disabled")):(e.host.removeAttr("disabled"),e.host.removeClass(e.toThemeProperty("jqx-fill-state-disabled"))):"placeHolder"==t?this._browserCheck&&("placeholder"in this.element?e.element.setAttribute("placeholder",e.placeHolder):""===e.input.value?(e.input.setAttribute("type","text"),e.input.value=s):e.input.value==i&&(e.input.value=s)):this.refresh()},resize:function(e,t){this.width=e,this.height=t,null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=this.width:null==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:null==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px")},_setAttributes:function(){var t=this,e=t.element,i=(null!=this.width&&-1!=this.width.toString().indexOf("px")?this.element.style.width=this.width:null==this.width||isNaN(this.width)||(this.element.style.width=this.width+"px"),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.element.style.height=this.height:null==this.height||isNaN(this.height)||(this.element.style.height=this.height+"px"),null!=this.height&&-1!=this.height.toString().indexOf("%")&&(this.element.style.height=this.height),null!=this.width&&-1!=this.width.toString().indexOf("%")&&(this.element.style.width=this.width),t.maxLength&&e.setAttribute("maxlength",t.maxLength),t.minLength&&e.setAttribute("minLength",t.minLength),t.placeHolder&&t._browserCheck&&("placeholder"in t.element?e.setAttribute("placeholder",t.placeHolder):""===e.value&&(e.setAttribute("type","text"),e.value=t.placeHolder)),t.disabled?(e.setAttribute("disabled","disabled"),e.className+=" "+this.toThemeProperty("jqx-fill-state-disabled")):(e.removeAttribute("disabled"),t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled"))),!1);t.addHandler(e,"change.passwordinput"+t.widgetID,function(e){i||(e.preventDefault(),e.stopPropagation(),i=!0,t._raiseEvent(),i=!1),t._refreshPlaceHolder()}),t.addHandler(e,"click.passwordinput"+t.widgetID,function(){t.showPasswordIcon&&t.icon&&(t.icon.style.display="inline",t._positionIcon())}),t.interval=null,t.addHandler(e,"keydown.passwordinput"+t.widgetID,function(){var e;t.changeType="keyboard",t.showPasswordIcon&&t.icon&&(t.interval&&clearInterval(t.interval),e=0,t.interval=setInterval(function(){"none"!=t.icon.style.display?(t._positionIcon(),5<++e&&clearInterval(t.interval)):clearInterval(t.interval)},100))}),t.addHandler(e,"focus.passwordinput"+t.widgetID,function(){t._focused=!0,e.className+=" "+t.toThemeProperty("jqx-fill-state-focus"),!t.placeHolder||!t._browserCheck||"placeholder"in t.element||e.value!=t.placeHolder||(e.value="",t._hidden&&e.setAttribute("type","password")),0<t.val().length&&t.showStrength&&t.host.jqxTooltip("content")&&t.host.jqxTooltip("open"),t.showPasswordIcon&&t.icon&&(t.icon.style.display="inline",t._positionIcon())}),t.addHandler(e,"blur.passwordinput"+t.widgetID,function(){t._focused=!1,t.host.removeClass(t.toThemeProperty("jqx-fill-state-focus")),!t.placeHolder||!t._browserCheck||"placeholder"in t.input||""!==e.value||(t.input.value=t.placeHolder,t.input.setAttribute("type","text")),t.showPasswordIcon&&t._browserCheck&&(!1===t.rtl?t.host.removeClass(t.toThemeProperty("jqx-passwordinput-password-icon-ltr")):t.host.removeClass(t.toThemeProperty("jqx-passwordinput-password-icon-rtl"))),t.showStrength&&t.host.jqxTooltip("close"),t.showPasswordIcon&&t.icon&&(t.icon.style.display="none")})},_refreshPlaceHolder:function(){var e=this;e.isMaterialized()||("placeholder"in this.input&&!(a.jqx.browser.msie&&a.jqx.browser.version<9)?e.input.setAttribute("placeHolder",e.placeHolder):""===e.input.value&&(e.input.value=e.placeHolder)),""!==e.input.value?e.element.setAttribute("hint",!0):e.element.removeAttribute("hint"),e.label&&(e.label.innerHTML=e.placeHolder)},destroy:function(){this.host.jqxTooltip&&this.host.jqxTooltip("destroy"),this.host.remove()},_setTheme:function(){var e=this,t="jqx-widget jqx-widget-content jqx-input jqx-input-widget jqx-rc-all";e.rtl?(t+=" jqx-rtl",e.element.style.direction="rtl"):(e.host.removeClass(e.toThemeProperty("jqx-rtl")),e.element.style.direction="ltr"),e.element.className+=" "+e.toThemeProperty(t)},_showPassword:function(){var e,t,i,s,n,o;this.showPasswordIcon&&this._browserCheck&&(e=this,t=document.createElement("span"),i=".passwordinput"+e.widgetID,t.setAttribute("tabindex",-1),t.setAttribute("hasfocus",!1),t.setAttribute("title",e.localization.showPasswordString),t.style.position="absolute",t.style.display="none",t.className=e.toThemeProperty("jqx-passwordinput-password-icon"),(s=e.element.parentNode)&&(e.element.nextSibling?s.insertBefore(t,e.element.nextSibling):s.appendChild(t)),e.icon=t,e._positionIcon(),n=function(){e.element.setAttribute("type","password"),e.input&&e.input.setAttribute("type","password"),e._hidden=!0},o=function(){!1===e._hidden?n():e._hidden&&(e.element.setAttribute("type","text"),e.input&&e.input.setAttribute("type","text"),e._hidden=!1)},a.jqx.mobile.isTouchDevice()?e.addHandler(e.icon,"mousedown"+i,function(){return o(),!1}):(e.addHandler(e.icon,"mousedown"+i,function(){return o(),!1}),e.addHandler(a(document),"mouseup"+i,function(){return n(),!1}),e.addHandler(a(document),"mousedown"+i,function(){e._focused&&n()})))},_positionIcon:function(){var e=this.host.offset(),t=this.element.offsetWidth,i=this.element.offsetHeight,s=a(this.icon);this.rtl?s.offset({top:parseInt(e.top+i/2-5,10),left:e.left+2}):s.offset({top:parseInt(e.top+i/2-5,10),left:e.left+t-18})},_showStrength:function(){var e=this;if(e.showStrength){if(!e.host.jqxTooltip)throw new Error("jqxPasswordInput: Missing reference to jqxtooltip.js");var t,i,s=e.widgetID+"Strength",n=s+"Value",s=s+"Indicator";t=e.strengthTypeRenderer?(t=e.input.value,"placeholder"in e.input||!e._browserCheck||t!=e.placeHolder||(t=""),e._countCharacters(),i=e.localization.tooShort,e.strengthTypeRenderer(t,{letters:e.letters,numbers:e.numbers,specialKeys:e.specials},i)):'<div style="width: 220px;"><div><span style="font-weight: bold;">'+e.localization.passwordStrengthString+': </span><span id="'+n+'"></span></div><div id="'+s+'"></div></div>',e.host.jqxTooltip({theme:e.theme,position:e.showStrengthPosition,content:t,trigger:"none",autoHide:!1,rtl:e.rtl}),e.strengthTypeRenderer||(i=document.getElementById(s),document.getElementById(n).innerHTML=e.localization.tooShort,i.className+=" jqx-passwordinput-password-strength-inicator",i.style.backgroundColor=e.strengthColors.tooShort,!1===e.rtl?i.style.float="left":i.style.float="right"),e._checkStrength()}},_checkStrength:function(){var e=this;e.addHandler(e.host,"keyup.passwordinput"+e.widgetID,function(){e._evaluateStrength()})},_raiseEvent:function(){var e=new a.Event("change");return e.args={type:this.changeType},this.changeType=null,(e.owner=this).host.trigger(e)},_evaluateStrength:function(){var e,t=this,i=t.input.value,s=i.length,n=(t._countCharacters(),0<s&&t.showStrength&&!t.host.jqxTooltip("opened")&&t.host.jqxTooltip("open"),t.letters+t.numbers+2*t.specials+t.letters*t.numbers/2+s),o=s<8?t.localization.tooShort:n<20?t.localization.weak:n<30?t.localization.fair:n<40?t.localization.good:t.localization.strong;if(t.strengthTypeRenderer)e=t.strengthTypeRenderer(i,{letters:t.letters,numbers:t.numbers,specialKeys:t.specials},o),t.host.jqxTooltip({content:e});else{t.passwordStrength&&(e=t.passwordStrength(i,{letters:t.letters,numbers:t.numbers,specialKeys:t.specials},o),a.each(t.localization,function(){if(e==this)return o=e,!1})),document.getElementById(t.widgetID+"StrengthValue").innerHTML=o;var r,l,s=document.getElementById(t.widgetID+"StrengthIndicator");switch(o){case t.localization.tooShort:r="20%",l=t.strengthColors.tooShort;break;case t.localization.weak:r="40%",l=t.strengthColors.weak;break;case t.localization.fair:r="60%",l=t.strengthColors.fair;break;case t.localization.good:r="80%",l=t.strengthColors.good;break;case t.localization.strong:r="100%",l=t.strengthColors.strong}s.style.width=r,s.style.backgroundColor=l}},_countCharacters:function(){for(var e=this,t=(e.letters=0,e.numbers=0,e.specials=0,e.input.value),i=t.length,s=0;s<i;s++){var n=t.charAt(s),o=t.charCodeAt(s);64<o&&o<91||96<o&&o<123||127<o&&o<155||159<o&&o<166?e.letters+=1:!1===isNaN(n)?e.numbers+=1:-1!="<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-=".indexOf(n)&&(e.specials+=1)}},_toPx:function(e){return"number"==typeof e?e+"px":e}})}(jqxBaseFramework);